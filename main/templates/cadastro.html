{% extends "base.html" %}
{% load static %}

{% block 'cabecalho' %}
  <link rel="stylesheet" href="{% static 'geral/css/cadastro.css' %}">
{% endblock %}

{% block 'conteudo' %}

  {% if messages %}
  {% for message in messages %}
      <section class="alert {{message.tags}}">{{message}}</section>
  {% endfor %}
  {% endif %}
  <form action="{% url 'cadastro' %}" method="POST"> {% csrf_token %}
    <div class="mb-3">
      <label for="nome" class="form-label">Primeiro nome</label>
      <input type="text" class="form-control" id="nome" name="nome" placeholder="">
    </div>
    <div class="mb-3">
      <label for="sobrenome" class="form-label">Sobrenome</label>
      <input type="text" class="form-control" id="sobrenome" name="sobrenome" placeholder="">
    </div>
    <div class="mb-3">
      <label for="username" class="form-label">Nome de usuario</label>
      <input type="text" class="form-control" id="username" name="username" placeholder="Usuario">
    </div>
    <div class="mb-3">
      <label for="exampleInputEmail1" class="form-label">Email address</label>
      <input type="email" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" name="email" placeholder="Usuario">
    </div>
    <div class="mb-3">
      <label for="telefone" class="form-label">Celular: </label>
      <input type="text" class="form-control" id="telefone" name="telefone" placeholder="Digite seu número de celular">
      {% comment %} <input type="tel" class="form-control" id="inputCelular" aria-describedby="phoneHelp" name="celular" pattern="[0-9]{2} [0-9]{5}-[0-9]{4}" placeholder="Formato: 99 99999-9999" required> {% endcomment %}

    </div>
    <div class="mb-3">
      <label for="exampleInputPassword1" class="form-label">Senha</label>
      <input type="password" class="form-control" id="exampleInputPassword1" name="senha" placeholder="Senha">
    </div>
    <div class="mb-3">
      <label for="exampleInputPassword2" class="form-label">Confirmar senha</label>
      <input type="password" class="form-control" id="exampleInputPassword2" name="confirmar_senha">
    </div>
    <button type="submit" class="btn btn-cadastro">Enviar</button>
  </form>

  <script>
    // Função para formatar o número de telefone
    function formatarTelefone(telefone) {
      // Verifica se o número tem pelo menos 10 dígitos
      if (telefone.length >= 10) {
        // Formata o número como (xx) xxxxxxxxx
        return '(' + telefone.substr(0, 2) + ') ' + telefone.substr(2, 5) + '-' + telefone.substr(7);
      } else {
        return telefone;
      }
    }
    
    // Função para validar e formatar o número de telefone conforme o usuário digita
    document.getElementById('telefone').addEventListener('input', function(event) {
      var telefoneInput = event.target;
      var telefone = telefoneInput.value.replace(/\D/g, ''); // Remove caracteres não numéricos
      var telefoneFormatado = formatarTelefone(telefone);
      
      telefoneInput.value = telefoneFormatado;
    });
  </script>
{% endblock %}